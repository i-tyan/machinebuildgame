<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ”ã‚¯ã‚»ãƒ«ãƒ»ã‚µãƒã‚¤ãƒãƒ«ãƒ»ã‚¯ãƒ©ãƒ•ãƒˆ V4 - ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«çµ±åˆç‰ˆ</title>
    <style>
        /* ========================================================== */
        /* CSS: ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾© */
        /* ========================================================== */
        body {
            font-family: 'Pixelify Sans', 'Arial', sans-serif;
            background-color: #0d0d0d;
            color: #d0d0d0;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #4CAF50;
            text-shadow: 2px 2px 3px #000;
            margin-bottom: 20px;
            border-bottom: 3px solid #333;
            padding-bottom: 10px;
        }

        /* --- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«/ç¾åœ¨ã®æ“ä½œã‚¨ãƒªã‚¢ --- */
        #current-selection {
            background-color: #333;
            padding: 10px;
            margin-bottom: 20px;
            border: 2px solid #ff9800; /* ç›®ç«‹ã¤è‰² */
            font-size: 1.2em;
        }
        #selected-part-info {
            color: #ffc107;
            font-weight: bold;
        }

        /* --- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ: 3åˆ†å‰²UI --- */
        .container {
            display: flex;
            justify-content: center;
            gap: 20px;
            max-width: 1300px;
            margin: 0 auto;
        }
        .ui-panel {
            flex: 1;
            background-color: #1c1c1c;
            padding: 15px;
            border: 3px solid #333;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            min-height: 500px;
            overflow: hidden;
            position: relative; /* ã‚¬ã‚¤ãƒ‰é…ç½®ç”¨ */
        }
        .ui-panel h2 {
            color: #ffc107;
            border-bottom: 2px solid #555;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        /* --- ã‚¯ãƒ©ãƒ•ãƒˆã‚°ãƒªãƒƒãƒ‰ --- */
        #craft-grid {
            display: grid;
            grid-template-columns: repeat(4, 90px);
            grid-template-rows: repeat(4, 90px);
            gap: 2px;
            margin: 10px auto;
            border: 4px solid #4CAF50;
        }
        .grid-cell {
            width: 90px;
            height: 90px;
            border: 1px dashed #666;
            background-color: #2a2a2a;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: #fff;
            font-weight: bold;
            transition: background-color 0.1s;
        }
        .grid-cell.occupied {
            border: 2px solid #aaa;
            box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.2);
            transition: transform 0.1s;
        }
        .grid-cell.occupied:hover { transform: scale(1.05); }
        .grid-cell.highlight {
            border: 3px solid yellow; /* é¸æŠãƒ‘ãƒ¼ãƒ„ã®é…ç½®å…ˆã‚’å¼·èª¿ */
            background-color: #444;
        }

        /* --- ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª --- */
        #inventory-list {
            overflow-y: auto;
            max-height: 380px;
            padding-right: 10px;
            text-align: left;
        }
        .part-item {
            display: flex;
            align-items: center;
            padding: 8px;
            margin-bottom: 8px;
            background-color: #333;
            border-left: 4px solid #555;
            cursor: pointer;
            transition: background-color 0.2s, border-left 0.2s;
        }
        .part-item:hover { background-color: #444; }
        .part-item.selected { border-left: 4px solid #ff4500; background-color: #5d4242; }

        .part-icon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            border: 1px solid #000;
        }
        .part-tier-1 { background-color: #5c5c5c; }
        .part-tier-2 { background-color: #1e88e5; }
        .part-tier-3 { background-color: #ff9800; }

        .part-details { font-size: 12px; }
        .part-details strong { color: #fff; font-size: 14px; }

        /* --- STATS OUTPUT --- */
        #stats-output { text-align: left; }
        .stat-item { margin: 10px 0; padding-bottom: 5px; border-bottom: 1px dashed #333; }
        .stat-item strong { color: #4CAF50; font-size: 16px; }
        .stat-description { font-size: 0.9em; color: #aaa; margin-top: 3px; }

        /* --- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒœã‚¿ãƒ³ --- */
        #status-message {
            margin: 15px 0;
            padding: 10px;
            font-weight: bold;
            font-size: 1.1em;
            min-height: 40px;
            text-align: center;
        }
        .msg-error { background-color: #6d1e1e; color: #ff9800; border: 2px solid #ff4500; }
        .msg-success { background-color: #2a5a2c; color: #a5d6a7; border: 2px solid #4CAF50; }

        #action-buttons { margin-top: 20px; }
        #action-buttons button {
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            border: none;
            cursor: pointer;
            margin-right: 10px;
            transition: background-color 0.2s, box-shadow 0.2s;
        }
        #check-btn { background-color: #03a9f4; }
        #check-btn.highlight { 
            background-color: #03c7ff;
            box-shadow: 0 0 15px #03c7ff; /* ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å¼·èª¿ */
        }
        #check-btn:hover { background-color: #039be5; }
        #go-btn { background-color: #ff4500; font-weight: bold; }
        #go-btn:hover { background-color: #e63900; }
        #go-btn:disabled { background-color: #555; cursor: not-allowed; }

        /* --- ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰ (NEW!) --- */
        #inventory-guide {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #000;
            border-top: 2px solid #ff9800;
            padding: 10px;
            text-align: left;
            font-size: 0.9em;
        }
        #inventory-guide strong { color: #4CAF50; }

    </style>
</head>
<body>

    <h1>ãƒ”ã‚¯ã‚»ãƒ«ãƒ»ã‚µãƒã‚¤ãƒãƒ«ãƒ»ã‚¯ãƒ©ãƒ•ãƒˆ âš’ï¸</h1>
    
    <div id="current-selection">
        ç¾åœ¨ã®æ“ä½œ: <span id="selected-part-info"></span>
    </div>

    <div class="container">
        
        <div id="inventory" class="ui-panel">
            <h2>INVENTORY (ã‚¹ã‚¯ãƒ©ãƒƒãƒ—å“)</h2>
            <div id="inventory-list">
                </div>
            <div id="inventory-guide">
                <strong>ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰:</strong><br>
                â¬› FRAME (ãƒ•ãƒ¬ãƒ¼ãƒ ) / âš™ï¸ ENGINE (å‹•åŠ›) / ğŸ› MOVEMENT (ç§»å‹•) ã¯**å¿…é ˆ**ã§ã™ï¼
            </div>
        </div>

        <div id="craft-area" class="ui-panel">
            <h2>CRAFT GRID (4x4) - ä¹—ã‚Šç‰©è¨­è¨ˆå›³</h2>
            <div id="craft-grid">
                </div>
            <div id="action-buttons">
                <button id="check-btn">æ€§èƒ½ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
                <button id="go-btn" disabled>GO! æ¢ç´¢é–‹å§‹ â¡ï¸</button>
            </div>
        </div>
        
        <div id="stats-output" class="ui-panel">
            <h2>VEHICLE STATS (æ€§èƒ½åˆ†æ)</h2>
            <div id="status-message" class="msg-error"></div>
            </div>

    </div>

    <script>
        // ==========================================================
        // JAVASCRIPT: ãƒ­ã‚¸ãƒƒã‚¯å®šç¾©
        // ==========================================================
        
        // --- 1. å®šæ•°ã¨ãƒ‡ãƒ¼ã‚¿ ---
        const GRID_SIZE = 4;
        const GRID_CELLS = GRID_SIZE * GRID_SIZE;
        const WEIGHT_PENALTY_FACTOR = 0.1; 

        // ãƒ‘ãƒ¼ãƒ„ã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
        const PART_DATA = {
            'frame_basic': { name: 'ãƒ•ãƒ¬ãƒ¼ãƒ  (T1)', type: 'body', tier: 1, weight: 10, durability: 50, power: 0, speed_bonus: 0, energy_cost: 0, icon: 'â¬›' , desc: 'ä¹—ã‚Šç‰©ã®åŸºç¤ã€‚ã“ã‚ŒãŒç„¡ã„ã¨å§‹ã¾ã‚‰ãªã„ã€‚'},
            'wheel_small': { name: 'å°å‹ã‚¿ã‚¤ãƒ¤ (T1)', type: 'movement', tier: 1, weight: 5, durability: 20, speed_bonus: 2, power: 0, energy_cost: 1, icon: 'ğŸ›', desc: 'æœ€ä½é™ã®ç§»å‹•åŠ›ã€‚å¹³åœ°å‘ãã€‚'},
            'engine_low': { name: 'ã‚¨ãƒ³ã‚¸ãƒ³ (T1)', type: 'engine', tier: 1, weight: 8, durability: 30, power: 10, speed_bonus: 0, energy_cost: 5, icon: 'âš™ï¸', desc: 'å‹•åŠ›ã‚’ä¾›çµ¦ã™ã‚‹ãŒã€ç‡ƒè²»ã¯æ™®é€šã€‚'},
            'armor_plate': { name: 'è£…ç”²æ¿ (T1)', type: 'defense', tier: 1, weight: 15, durability: 80, power: 0, speed_bonus: 0, energy_cost: 0, icon: 'ğŸ›¡ï¸', desc: 'é‡ããªã‚‹ãŒã€ç”Ÿå­˜ç‡ãŒä¸ŠãŒã‚‹ã€‚'},
            'booster_jet': { name: 'ã‚¿ãƒ¼ãƒœ (T2)', type: 'engine', tier: 2, weight: 12, durability: 40, power: 30, speed_bonus: 0, energy_cost: 20, icon: 'ğŸ”¥', desc: 'é«˜å‡ºåŠ›ã ãŒã€ç‡ƒæ–™ã‚’æ¿€ã—ãæ¶ˆè²»ã™ã‚‹ã€‚'},
            'wheel_offroad': { name: 'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰ (T2)', type: 'movement', tier: 2, weight: 7, durability: 35, speed_bonus: 4, power: 0, energy_cost: 2, icon: 'ğŸšœ', desc: 'ç ‚æ¼ ã‚„å²©å ´ã§ã‚‚å®‰å®šã™ã‚‹ã€‚'},
            'battery_pack': { name: 'ãƒãƒƒãƒ†ãƒªãƒ¼ (T2)', type: 'utility', tier: 2, weight: 5, durability: 10, power: 0, speed_bonus: 0, energy_cost: -15, icon: 'ğŸ”‹', desc: 'ç‡ƒè²»ã‚’æ”¹å–„ã™ã‚‹è£œåŠ©ãƒ‘ãƒ¼ãƒ„ã€‚è€ä¹…æ€§ã¯ä½ã„ã€‚'}
        };

        let inventoryParts = Object.keys(PART_DATA);
        let selectedPart = null;
        let craftGridState = Array(GRID_CELLS).fill(null);

        const craftGrid = document.getElementById('craft-grid');
        const inventoryList = document.getElementById('inventory-list');
        const statsOutput = document.getElementById('stats-output');
        const statusMessage = document.getElementById('status-message');
        const checkBtn = document.getElementById('check-btn');
        const goBtn = document.getElementById('go-btn');
        const selectedPartInfo = document.getElementById('selected-part-info');

        // --- 2. åˆæœŸåŒ–ã¨UIæ§‹ç¯‰ ---

        function initializeUI() {
            craftGrid.innerHTML = '';
            for (let i = 0; i < GRID_CELLS; i++) {
                const cell = document.createElement('div');
                cell.classList.add('grid-cell');
                cell.dataset.index = i;
                cell.addEventListener('click', () => placePart(i));
                craftGrid.appendChild(cell);
            }
            createInventory();
            updateSelectedPartInfo();
            displayStats(); // åˆæœŸçŠ¶æ…‹ã®ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
        }

        function createInventory() {
            inventoryList.innerHTML = '';
            for (const partId of inventoryParts) {
                const data = PART_DATA[partId];
                const item = document.createElement('div');
                item.classList.add('part-item');
                item.dataset.partId = partId;
                
                let tierClass = `part-tier-${data.tier}`;

                item.innerHTML = `
                    <div class="part-icon ${tierClass}">${data.icon}</div>
                    <div class="part-details">
                        <strong>${data.name}</strong><br>
                        <span>ç‡ƒè²»èª¿æ•´: ${data.energy_cost} / é‡ã•: ${data.weight}</span>
                    </div>
                `;
                item.addEventListener('click', () => selectPart(partId));
                inventoryList.appendChild(item);
            }
        }

        // --- 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã¨ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¬ã‚¤ãƒ‰ ---

        function updateSelectedPartInfo() {
            let partsPlaced = craftGridState.some(p => p !== null);
            checkBtn.classList.remove('highlight');
            goBtn.disabled = true;

            if (selectedPart) {
                const data = PART_DATA[selectedPart];
                selectedPartInfo.textContent = `é¸æŠä¸­: ${data.name}ã€‚ã‚°ãƒªãƒƒãƒ‰ã®ç©ºããƒã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é…ç½®ã—ã¦ãã ã•ã„ã€‚`;
                selectedPartInfo.classList.add('msg-success');
                selectedPartInfo.classList.remove('msg-error');
            } else if (partsPlaced) {
                selectedPartInfo.textContent = 'âœ… é…ç½®å®Œäº†ï¼ã€Œæ€§èƒ½ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
                selectedPartInfo.classList.add('msg-success');
                selectedPartInfo.classList.remove('msg-error');
                checkBtn.classList.add('highlight'); // æ¬¡ã®è¡Œå‹•ã‚’å¼·èª¿
            } else {
                selectedPartInfo.textContent = 'ğŸ‘† ã¾ãšã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‹ã‚‰ãƒ‘ãƒ¼ãƒ„ã‚’é¸ã³ã€ã‚¯ãƒ©ãƒ•ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚';
                selectedPartInfo.classList.remove('msg-success');
                selectedPartInfo.classList.add('msg-error');
            }
            
            // ã‚°ãƒªãƒƒãƒ‰ã‚»ãƒ«ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ›´æ–°
            document.querySelectorAll('.grid-cell').forEach(cell => cell.classList.remove('highlight'));
            if (selectedPart) {
                document.querySelectorAll('.grid-cell:not(.occupied)').forEach(cell => cell.classList.add('highlight'));
            }
        }

        function selectPart(partId) {
            document.querySelectorAll('.part-item').forEach(item => item.classList.remove('selected'));
            
            if (selectedPart === partId) {
                selectedPart = null;
            } else {
                selectedPart = partId;
                document.querySelector(`.part-item[data-part-id="${partId}"]`).classList.add('selected');
            }
            updateSelectedPartInfo();
        }

        function placePart(index) {
            const cell = craftGrid.querySelector(`.grid-cell[data-index="${index}"]`);
            
            if (selectedPart) {
                // é…ç½®
                craftGridState[index] = selectedPart;
                cell.classList.add('occupied');
                cell.style.backgroundColor = getPartColor(selectedPart);
                cell.innerHTML = PART_DATA[selectedPart].icon;
                
                selectPart(null); // é…ç½®å¾Œã€é¸æŠè§£é™¤
            } else if (craftGridState[index]) {
                // å›å
                const collectedPartId = craftGridState[index];
                craftGridState[index] = null;
                cell.classList.remove('occupied');
                cell.style.backgroundColor = '#2a2a2a';
                cell.innerHTML = '';
                alert(`ãƒ‘ãƒ¼ãƒ„: ${PART_DATA[collectedPartId].name} ã‚’å›åã—ã¾ã—ãŸã€‚ã‚°ãƒªãƒƒãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å›åã§ãã¾ã™ã€‚`);
            }
            displayStats();
            updateSelectedPartInfo();
        }

        function getPartColor(partId) {
            const type = PART_DATA[partId].type;
            switch(type) {
                case 'body': return '#993333';
                case 'engine': return '#336699';
                case 'movement': return '#558855';
                case 'defense': return '#777777';
                case 'utility': return '#d4ac0d';
                default: return '#555';
            }
        }


        // --- 4. æ€§èƒ½è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ (V3ã‹ã‚‰å¤‰æ›´ãªã—) ---

        function calculateVehicleStats() {
            let totalWeight = 0, totalDurability = 0, totalPower = 0;
            let totalEnergyCost = 0, totalSpeedBonus = 0;
            let hasBody = false, hasMovement = false; 

            for (const partId of craftGridState) {
                if (!partId) continue;
                const data = PART_DATA[partId];

                if (data.type === 'body') hasBody = true;
                if (data.type === 'engine') totalPower += data.power;
                if (data.type === 'movement') hasMovement = true;

                totalWeight += data.weight;
                totalDurability += data.durability;
                totalEnergyCost += data.energy_cost;
                totalSpeedBonus += data.speed_bonus;
            }
            
            if (!hasBody) return { error: "âŒ [è‡´å‘½çš„] è»Šä½“ãƒ•ãƒ¬ãƒ¼ãƒ  (â¬›) ãŒå¿…è¦ã§ã™ï¼", stats: null };
            if (totalPower === 0) return { error: "âŒ [å‹•ä½œä¸èƒ½] å‹•åŠ›æº (âš™ï¸) ãŒå¿…è¦ã§ã™ï¼", stats: null };
            if (!hasMovement) return { error: "âŒ [ç§»å‹•ä¸å¯] è»Šè¼ª (ğŸ›) ãŒã‚ã‚Šã¾ã›ã‚“ï¼", stats: null };

            const BASE_SPEED = 10;
            const weightPenalty = totalWeight * WEIGHT_PENALTY_FACTOR;

            const finalSpeed = (BASE_SPEED + totalPower + totalSpeedBonus) - weightPenalty;
            
            const FUEL_FACTOR = 2.0;
            const finalFuelCapacity = (totalDurability * FUEL_FACTOR) - (totalEnergyCost);

            return {
                error: null,
                stats: {
                    weight: totalWeight,
                    durability: totalDurability,
                    power: totalPower,
                    totalSpeedBonus: totalSpeedBonus,
                    speed: Math.max(0.1, finalSpeed),
                    energy_cost: totalEnergyCost,
                    fuel: finalFuelCapacity,
                    penalty: weightPenalty
                }
            };
        }

        // --- 5. UIæ›´æ–° (ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯) ---

        function displayStats() {
            const result = calculateVehicleStats();
            statsOutput.innerHTML = '<h2>VEHICLE STATS (æ€§èƒ½åˆ†æ)</h2>';
            goBtn.disabled = true;

            if (result.error) {
                statusMessage.classList.remove('msg-success');
                statusMessage.classList.add('msg-error');
                statusMessage.textContent = result.error;
                return;
            }

            const stats = result.stats;

            let statsHTML = '';
            
            // 1. ã‚¹ãƒ”ãƒ¼ãƒ‰ (ãƒ¯ã‚¯ãƒ¯ã‚¯)
            statsHTML += `<div class="stat-item">
                ğŸš€ **æœ€é«˜é€Ÿåº¦ (km/h):** <strong>${stats.speed.toFixed(1)}</strong>
                <div class="stat-description">(${stats.power}å‹•åŠ› + ${stats.totalSpeedBonus}ã‚¿ã‚¤ãƒ¤) - ${stats.penalty.toFixed(1)}é‡ã•ãƒšãƒŠãƒ«ãƒ†ã‚£</div>
            </div>`;
            
            // 2. ç‡ƒæ–™ (ç·Šå¼µ)
            const fuelColor = stats.fuel < 50 ? '#ff9800' : '#4CAF50';
            statsHTML += `<div class="stat-item">
                â›½ **æ¢ç´¢å¯èƒ½ç‡ƒæ–™ (L):** <strong style="color:${fuelColor};">${stats.fuel.toFixed(0)}</strong>
                <div class="stat-description">è€ä¹…åº¦ãƒ™ãƒ¼ã‚¹ã®å®¹é‡ã‹ã‚‰ã€ç·ç‡ƒè²»(${stats.energy_cost})ã‚’å·®ã—å¼•ã„ãŸå€¤ã€‚</div>
            </div>`;
            
            if (stats.fuel <= 0) {
                 statusMessage.classList.add('msg-error');
                 statusMessage.textContent = `ğŸ’€ [GAME OVER] ç‡ƒæ–™ ${stats.fuel.toFixed(0)} Lã€‚å‡ºç™ºç›´å¾Œã«åœæ­¢ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒ„ã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚`;
            } else {
                 statusMessage.classList.remove('msg-error');
                 statusMessage.classList.add('msg-success');
                 statusMessage.textContent = "âœ… ã‚¯ãƒ©ãƒ•ãƒˆæˆåŠŸï¼ã“ã®ä¹—ã‚Šç‰©ã§æ¢ç´¢ã¸GO!";
                 goBtn.disabled = false;
            }
            
            // 3. è€ä¹…åº¦ (ã‚µãƒã‚¤ãƒãƒ«)
            statsHTML += `<div class="stat-item">
                ğŸ›¡ï¸ **æœ€å¤§è€ä¹…åº¦:** <strong>${stats.durability}</strong>
                <div class="stat-description">è¡çªã‚„ç’°å¢ƒãƒ€ãƒ¡ãƒ¼ã‚¸ã«å¯¾ã™ã‚‹é˜²å¾¡åŠ›ã€‚</div>
            </div>`;
            
            // 4. é‡ã• (ã‚³ã‚¹ãƒˆ)
            statsHTML += `<div class="stat-item">
                âš–ï¸ **ç·é‡é‡:** ${stats.weight}
                <div class="stat-description">é‡ã„ã»ã©é€Ÿåº¦ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒå¤§ãããªã‚Šã¾ã™ã€‚</div>
            </div>`;


            statsOutput.innerHTML += statsHTML;
        }

        // --- 6. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã¨å®Ÿè¡Œ ---
        checkBtn.addEventListener('click', displayStats);
        goBtn.addEventListener('click', () => {
            const result = calculateVehicleStats();
            if (!result.error && result.stats.fuel > 0) {
                alert(`ğŸš€ ${result.stats.speed.toFixed(1)} km/h ã§è’é‡ã¸GO! ç‡ƒæ–™ ${result.stats.fuel.toFixed(0)} L ã‚’é ¼ã‚Šã«ç”Ÿãæ®‹ã‚Œ!`);
                // TODO: ã“ã“ã«ã‚²ãƒ¼ãƒ ç”»é¢ã¸é·ç§»ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…
            } else {
                alert("è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚æ€§èƒ½ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
            }
        });

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸåŒ–
        initializeUI();
        
    </script>
</body>
</html>
